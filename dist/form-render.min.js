/*
formBuilder - git@github.com:kevinchappell/formBuilder.git
Version: 1.6.7
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
"use strict";!function(e){var t=function(t,r){var a={theme:"fresh",labels:{off:"Off",on:"On"}},n=e.extend(a,r),i=e('<div class="kc-toggle"/>').insertAfter(t).append(t);i.toggleClass("on",t.is(":checked"));var o='<div class="kct-on">'+n.labels.on+"</div>",s='<div class="kct-off">'+n.labels.off+"</div>",c='<div class="kct-handle"></div>',l='<div class="kct-inner">'+o+c+s+"</div>";i.append(l),i.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(r){var a=this;return a.each(function(){var a=e(this);if(!a.data("kcToggle")){var n=new t(a,r);a.data("kcToggle",n)}})}}(jQuery),function(e){e.fn.formRender=function(t){var r=e(this),a={destroyTemplate:!0,container:!1},n={},i=e.extend(a,t);n.markup=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2];t=n.attrString(t),r=Array.isArray(r)?r.join(""):r;var a=["input"],i=-1===a.indexOf(e)?"<"+e+" "+t+">"+r+"</"+e+">":"<"+e+" "+t+"/>";return i},n.fieldRender=function(t){var r="",a="",i="",o=n.parseAttrs(t.attributes),s=(o.description,e("option",t));o.id=o.name,"checkbox"!==o.type&&(o["class"]="form-control"),"hidden"!==o.type&&(a='<label for="'+o.id+'">'+o.label+"</label>"),"false"===o.required?delete o.required:(o.required=null,o["aria-required"]="true"),delete o.label,delete o.description;var c=n.attrString(o);switch(o.type){case"textarea":case"rich-text":delete o.type,delete o.value,r=a+"<textarea "+c+"></textarea>";break;case"select":o.type=o.type.replace("-group",""),s.length&&s.each(function(e,t){var r=n.parseAttrs(t.attributes),a=n.attrString(r),o=t.innerHTML||t.innerContent||t.innerText||t.childNodes[0].nodeValue||t.value;i+="<option "+a+">"+o+"</option>"}),r=a+"<select "+c+">"+i+"</select>";break;case"checkbox-group":case"radio-group":o.type=o.type.replace("-group",""),delete o["class"],s.length&&!function(){var t=o.name+"[]";s.each(function(r,a){var s=e.extend(o,n.parseAttrs(a.attributes));s.name=t,s.id=o.id+"-"+r;var c=n.attrString(s),l=a.innerHTML||a.innerContent||a.innerText||a.childNodes[0].nodeValue||a.value;i+="<input "+c+' /> <label for="'+s.id+'">'+l+"</label><br>"})}(),r=a+'<div class="'+o.type+'-group">'+i+"</div>";break;case"text":case"password":case"email":case"hidden":case"date":case"autocomplete":r=a+" <input "+c+">";break;case"checkbox":r="<input "+c+"> "+a,o.toggle&&setTimeout(function(){e(document.getElementById(o.id)).kcToggle()},100);break;default:r="<"+o.type+"></"+o.type+">"}return"hidden"!==o.type&&(r=n.markup("div",{"class":"form-group field-"+o.id},r)),r},n.attrString=function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var a=e[r]?'="'+e[r]+'"':"";t.push(r+a)}return t.join(" ")},n.parseAttrs=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r].nodeName]=e[r].nodeValue);return t},this.each(function(){var t=[],a=e.parseXML(r.val()),o=e("field",a);e("settings",a);if(!a)return alert("No formData. Add some fields and try again"),!1;o.length&&o.each(function(e,r){e=e,t.push(n.fieldRender(r))});var s=t.join("");i.container&&i.container.length?i.container.html(s):r.replaceWith(s)})}}(jQuery);