/*
formBuilder - http://kevinchappell.github.io/formBuilder/
Version: 1.8.1
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
"use strict";!function(e){var t=function(t,r){var n={theme:"fresh",labels:{off:"Off",on:"On"}},a=e.extend(n,r),o=e('<div class="kc-toggle"/>').insertAfter(t).append(t);o.toggleClass("on",t.is(":checked"));var i='<div class="kct-on">'+a.labels.on+"</div>",s='<div class="kct-off">'+a.labels.off+"</div>",l='<div class="kct-handle"></div>',c='<div class="kct-inner">'+i+l+s+"</div>";o.append(c),o.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(r){var n=this;return n.each(function(){var n=e(this);if(!n.data("kcToggle")){var a=new t(n,r);n.data("kcToggle",a)}})}}(jQuery),function(e){e.fn.formRender=function(t){var r=e(this),n={destroyTemplate:!0,container:!1,label:{selectColor:"Select Color",noFormData:"No form data.",formRendered:"Form Rendered"},render:!0,notify:{error:function(e){return console.error(e)},success:function(e){return console.log(e)},warning:function(e){return console.warn(e)}}},a={},o=e.extend(n,t);a.markup=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2];t=a.attrString(t),r=Array.isArray(r)?r.join(""):r;var n=["input"],o=-1===n.indexOf(e)?"<"+e+" "+t+">"+r+"</"+e+">":"<"+e+" "+t+"/>";return o},a.fieldRender=function(t){var r="",n="",i="",s=a.parseAttrs(t.attributes),l=s.description||"",c="",d=e("option",t);s.id=s.name,s.required&&(s.required=null,s["aria-required"]="true",c='<span class="required">*</span>'),"hidden"!==s.type&&(l&&(l='<span class="tooltip-element" tooltip="'+l+'">?</span>'),n='<label for="'+s.id+'">'+s.label+" "+c+" "+l+"</label>");var u=s.label;delete s.label,delete s.description;var f=a.attrString(s);switch(s.type){case"textarea":case"rich-text":delete s.type,delete s.value,r=n+"<textarea "+f+"></textarea>";break;case"select":s.type=s.type.replace("-group",""),d.length&&d.each(function(e,t){e=e;var r=a.parseAttrs(t.attributes),n=a.attrString(r),o=t.innerHTML||t.innerContent||t.innerText||t.childNodes[0].nodeValue||t.value;i+="<option "+n+">"+o+"</option>"}),r=n+"<select "+f+">"+i+"</select>";break;case"checkbox-group":case"radio-group":s.type=s.type.replace("-group",""),delete s.className,d.length&&!function(){var t="checkbox"===s.type?s.name+"[]":s.name;d.each(function(r,n){var o=e.extend({},s,a.parseAttrs(n.attributes)),l=void 0,c=void 0;o.selected&&(delete o.selected,o.checked=null),o.name=t,o.id=s.id+"-"+r,l=a.attrString(o),c=n.innerHTML||n.innerContent||n.innerText||n.value||"",i+="<input "+l+' /> <label for="'+o.id+'">'+c+"</label><br>"})}(),r=n+'<div class="'+s.type+'-group">'+i+"</div>";break;case"text":case"password":case"email":case"file":case"hidden":case"date":case"autocomplete":r=n+" <input "+f+">";break;case"color":r=n+" <input "+f+"> "+o.label.selectColor;break;case"button":case"submit":r="<button "+f+">"+u+"</button>";break;case"checkbox":r="<input "+f+"> "+n,s.toggle&&setTimeout(function(){e(document.getElementById(s.id)).kcToggle()},100);break;default:r="<"+s.type+"></"+s.type+">"}return"hidden"!==s.type&&(r=a.markup("div",{className:"form-group field-"+s.id},r)),r},a.attrString=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&(r=a.safeAttr(r,e[r]),t.push(r.name+r.value));return t.join(" ")},a.safeAttr=function(e,t){var r={className:"class"};return e=r[e]||e,t=t?window.JSON.stringify(t):!1,t=t?"="+t:"",{name:e,value:t}},a.parseAttrs=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r].nodeName]=e[r].nodeValue);return t},this.each(function(){var t=[],n=e.parseXML(r.val()),i=e("field",n);if(!n)return o.notify.error(o.label.noFormData),!1;o.notify.success(o.label.formRendered),i.length&&i.each(function(e,r){e=e,t.push(a.fieldRender(r))}),r.data("formHtml",t);var s=t.join("");o.render&&(o.container&&o.container.length?o.container.html(s):r.replaceWith(s))})}}(jQuery);