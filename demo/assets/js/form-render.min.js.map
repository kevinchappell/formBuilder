{"version":3,"sources":["form-render.min.js","form-render.js","kc-toggle.js"],"names":["FormRenderFn","options","element","formRender","this","defaults","destroyTemplate","container","dataType","formData","label","formRendered","noFormData","other","selectColor","render","notify","error","message","console","success","log","warning","warn","_helpers","opts","$","extend","getElement","id","makeId","document","getElementById","epoch","Date","getTime","tagName","value","markup","tag","content","arguments","length","undefined","attrs","contentType","field","createElement","getContentType","Array","isArray","_typeof","appendContent","string","innerHTML","object","appendChild","array","i","attr","hasOwnProperty","name","safeAttrName","setAttribute","call","fieldRender","fieldMarkup","fieldLabel","optionsMarkup","fieldAttrs","parseAttrs","attributes","fieldLabelText","fieldDesc","description","fieldRequired","fieldOptions","type","subtype","required","fieldLabelVal","fieldAttrsString","attrString","replace","each","index","el","optionAttrs","optionAttrsString","textContent","enableOther","optionName","selected","checked","class","toggle","setTimeout","kcToggle","className","hyphenCase","str","$1","toLowerCase","safeAttr","push","join","window","JSON","stringify","attrNodes","Element","prototype","appendFormFields","fields","reverse","emptyContainer","lastChild","removeChild","otherOptionCB","otherOptions","getElementsByClassName","_loop","otherInput","onclick","evt","option","style","display","nextElementSibling","oninput","runCallbacks","rendered","parseXML","noData","jQuery","renderedFormWrap","querySelector","parentNode","insertBefore","nextSibling","map","elem","Toggle","theme","labels","off","on","$kcToggle","insertAfter","append","toggleClass","is","kctOn","kctOff","kctHandle","kctInner","click","fn","data","Symbol","iterator","obj","constructor"],"mappings":"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","file":"form-render.min.js","sourcesContent":["'use strict';\n\n(function ($) {\n  'use strict';\n\n  var Toggle = function Toggle(element, options) {\n\n    var defaults = {\n      theme: 'fresh',\n      labels: {\n        off: 'Off',\n        on: 'On'\n      }\n    };\n\n    var opts = $.extend(defaults, options),\n        $kcToggle = $('<div class=\"kc-toggle\"/>').insertAfter(element).append(element);\n\n    $kcToggle.toggleClass('on', element.is(':checked'));\n\n    var kctOn = '<div class=\"kct-on\">' + opts.labels.on + '</div>',\n        kctOff = '<div class=\"kct-off\">' + opts.labels.off + '</div>',\n        kctHandle = '<div class=\"kct-handle\"></div>',\n        kctInner = '<div class=\"kct-inner\">' + kctOn + kctHandle + kctOff + '</div>';\n\n    $kcToggle.append(kctInner);\n\n    $kcToggle.click(function () {\n      element.attr('checked', !element.attr('checked'));\n      $(this).toggleClass('on');\n    });\n  };\n\n  $.fn.kcToggle = function (options) {\n    var toggle = this;\n    return toggle.each(function () {\n      var element = $(this);\n      if (element.data('kcToggle')) {\n        return;\n      }\n      var kcToggle = new Toggle(element, options);\n      element.data('kcToggle', kcToggle);\n    });\n  };\n})(jQuery);\n'use strict';\n// render the formBuilder XML into html\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nfunction FormRenderFn(options, element) {\n\n  var formRender = this,\n      defaults = {\n    destroyTemplate: true, // @todo\n    container: false,\n    dataType: 'xml',\n    formData: false,\n    label: {\n      formRendered: 'Form Rendered',\n      noFormData: 'No form data.',\n      other: 'Other',\n      selectColor: 'Select Color'\n    },\n    render: true,\n    notify: {\n      error: function error(message) {\n        return console.error(message);\n      },\n      success: function success(message) {\n        return console.log(message);\n      },\n      warning: function warning(message) {\n        return console.warn(message);\n      }\n    }\n  },\n      _helpers = {};\n\n  var opts = $.extend(true, defaults, options);\n\n  /**\n   * Require the html element if it has been lost\n   *\n   * @return {object} javascript object for html element\n   */\n  _helpers.getElement = function () {\n    if (!element.id) {\n      element.id = _helpers.makeId(element);\n    }\n\n    return document.getElementById(element.id);\n  };\n\n  /**\n   * Make an ID for this element using current date and tag\n   *\n   * @param  {Boolean} element\n   * @return {String}  new id for element\n   */\n  _helpers.makeId = function (element) {\n    var epoch = new Date().getTime();\n\n    return element.tagName + '-' + epoch;\n  };\n\n  if (!opts.formData && element) {\n    element = _helpers.getElement();\n    opts.formData = element.value;\n  }\n\n  /**\n   * Generate markup wrapper where needed\n   *\n   * @param  {string}              tag\n   * @param  {String|Array|Object} content we wrap this\n   * @param  {object}              attrs\n   * @return {String}\n   */\n  _helpers.markup = function (tag) {\n    var content = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n    var attrs = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n    var contentType = void 0,\n        field = document.createElement(tag),\n        getContentType = function getContentType(content) {\n      return Array.isArray(content) ? 'array' : typeof content === 'undefined' ? 'undefined' : _typeof(content);\n    },\n        appendContent = {\n      string: function string(content) {\n        field.innerHTML = content;\n      },\n      object: function object(content) {\n        return field.appendChild(content);\n      },\n      array: function array(content) {\n        for (var i = 0; i < content.length; i++) {\n          contentType = getContentType(content[i]);\n          appendContent[contentType](content[i]);\n        }\n      }\n    };\n\n    for (var attr in attrs) {\n      if (attrs.hasOwnProperty(attr)) {\n        var name = _helpers.safeAttrName(attr);\n        field.setAttribute(name, attrs[attr]);\n      }\n    }\n\n    contentType = getContentType(content);\n\n    if (content) {\n      appendContent[contentType].call(this, content);\n    }\n\n    return field;\n  };\n\n  /**\n   * Generate preview markup\n   * @param  {object} field\n   * @return {string}       preview markup for field\n   * @todo\n   */\n  _helpers.fieldRender = function (field) {\n    var fieldMarkup = '',\n        fieldLabel = '',\n        optionsMarkup = '';\n    var fieldAttrs = _helpers.parseAttrs(field.attributes),\n        fieldLabelText = fieldAttrs.label || '',\n        fieldDesc = fieldAttrs.description || '',\n        fieldRequired = '',\n        fieldOptions = $('option', field);\n    fieldAttrs.id = fieldAttrs.name;\n\n    fieldAttrs.type = fieldAttrs.subtype || fieldAttrs.type;\n\n    if (fieldAttrs.required) {\n      fieldAttrs.required = null;\n      fieldAttrs['aria-required'] = 'true';\n      fieldRequired = '<span class=\"required\">*</span>';\n    }\n\n    if (fieldAttrs.type !== 'hidden') {\n      if (fieldDesc) {\n        fieldDesc = '<span class=\"tooltip-element\" tooltip=\"' + fieldDesc + '\">?</span>';\n      }\n      fieldLabel = '<label for=\"' + fieldAttrs.id + '\">' + fieldLabelText + ' ' + fieldRequired + ' ' + fieldDesc + '</label>';\n    }\n\n    var fieldLabelVal = fieldAttrs.label;\n\n    delete fieldAttrs.label;\n    delete fieldAttrs.description;\n\n    var fieldAttrsString = _helpers.attrString(fieldAttrs);\n\n    switch (fieldAttrs.type) {\n      case 'textarea':\n      case 'rich-text':\n        delete fieldAttrs.type;\n        delete fieldAttrs.value;\n        fieldMarkup = fieldLabel + '<textarea ' + fieldAttrsString + '></textarea>';\n        break;\n      case 'select':\n        fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n        if (fieldOptions.length) {\n          fieldOptions.each(function (index, el) {\n            index = index;\n            var optionAttrs = _helpers.parseAttrs(el.attributes),\n                optionAttrsString = _helpers.attrString(optionAttrs);\n            optionsMarkup += '<option ' + optionAttrsString + '>' + el.textContent + '</option>';\n          });\n        }\n        fieldMarkup = fieldLabel + '<select ' + fieldAttrsString + '>' + optionsMarkup + '</select>';\n        break;\n      case 'checkbox-group':\n      case 'radio-group':\n        var enableOther = false;\n        fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n        if (fieldAttrs['enable-other']) {\n          delete fieldAttrs['enable-other'];\n          enableOther = true;\n        }\n\n        if (fieldOptions.length) {\n          (function () {\n            var optionName = fieldAttrs.type === 'checkbox' ? fieldAttrs.name + '[]' : fieldAttrs.name,\n                optionAttrsString = void 0;\n            fieldOptions.each(function (index, el) {\n              var optionAttrs = $.extend({}, fieldAttrs, _helpers.parseAttrs(el.attributes));\n\n              if (optionAttrs.selected) {\n                delete optionAttrs.selected;\n                optionAttrs.checked = null;\n              }\n\n              optionAttrs.name = optionName;\n              optionAttrs.id = fieldAttrs.id + '-' + index;\n              optionAttrsString = _helpers.attrString(optionAttrs);\n              optionsMarkup += '<input ' + optionAttrsString + ' /> <label for=\"' + optionAttrs.id + '\">' + el.textContent + '</label><br>';\n            });\n\n            if (enableOther) {\n              var optionAttrs = {\n                id: fieldAttrs.id + '-' + 'other',\n                name: optionName,\n                class: fieldAttrs.class + ' other-option'\n              };\n\n              optionAttrsString = _helpers.attrString($.extend({}, fieldAttrs, optionAttrs));\n              optionsMarkup += '<input ' + optionAttrsString + ' /> <label for=\"' + optionAttrs.id + '\">' + opts.label.other + '</label> <input type=\"text\" data-other-id=\"' + optionAttrs.id + '\" id=\"' + optionAttrs.id + '-value\" style=\"display:none;\" />';\n            }\n          })();\n        }\n        fieldMarkup = fieldLabel + '<div class=\"' + fieldAttrs.type + '-group\">' + optionsMarkup + '</div>';\n        break;\n      case 'text':\n      case 'password':\n      case 'email':\n      case 'file':\n      case 'hidden':\n      case 'date':\n      case 'autocomplete':\n        fieldMarkup = fieldLabel + ' <input ' + fieldAttrsString + '>';\n        break;\n      case 'color':\n        fieldMarkup = fieldLabel + ' <input ' + fieldAttrsString + '> ' + opts.label.selectColor;\n        break;\n      case 'button':\n      case 'submit':\n        fieldMarkup = '<button ' + fieldAttrsString + '>' + fieldLabelVal + '</button>';\n        break;\n      case 'checkbox':\n        fieldMarkup = '<input ' + fieldAttrsString + '> ' + fieldLabel;\n\n        if (fieldAttrs.toggle) {\n          setTimeout(function () {\n            $(document.getElementById(fieldAttrs.id)).kcToggle();\n          }, 100);\n        }\n        break;\n      default:\n        fieldMarkup = '<' + fieldAttrs.type + ' ' + fieldAttrsString + '>' + fieldLabelVal + '</' + fieldAttrs.type + '>';\n    }\n\n    if (fieldAttrs.type !== 'hidden') {\n      var className = fieldAttrs.id ? 'form-group field-' + fieldAttrs.id : '';\n      fieldMarkup = _helpers.markup('div', fieldMarkup, {\n        className: className\n      });\n    } else {\n      fieldMarkup = _helpers.markup('input', null, fieldAttrs);\n    }\n\n    return fieldMarkup;\n  };\n\n  /**\n   * Convert camelCase into lowercase-hyphen\n   *\n   * @param  {string} str\n   * @return {string}\n   */\n  _helpers.hyphenCase = function (str) {\n    str = str.replace(/[^\\w\\s\\-]/gi, '');\n    str = str.replace(/([A-Z])/g, function ($1) {\n      return '-' + $1.toLowerCase();\n    });\n\n    return str.replace(/\\s/g, '-').replace(/^-+/g, '');\n  };\n\n  _helpers.attrString = function (attrs) {\n    var attributes = [];\n\n    for (var attr in attrs) {\n      if (attrs.hasOwnProperty(attr)) {\n        attr = _helpers.safeAttr(attr, attrs[attr]);\n        attributes.push(attr.name + attr.value);\n      }\n    }\n    return attributes.join(' ');\n  };\n\n  _helpers.safeAttr = function (name, value) {\n    var safeAttr = {\n      className: 'class'\n    };\n\n    name = safeAttr[name] || name;\n    value = value ? window.JSON.stringify(value) : false;\n    value = value ? '=' + value : '';\n\n    return {\n      name: name,\n      value: value\n    };\n  };\n\n  _helpers.safeAttrName = function (name) {\n    var safeAttr = {\n      className: 'class'\n    };\n\n    return safeAttr[name] || _helpers.hyphenCase(name);\n  };\n\n  _helpers.parseAttrs = function (attrNodes) {\n    var fieldAttrs = {};\n    for (var attr in attrNodes) {\n      if (attrNodes.hasOwnProperty(attr)) {\n        fieldAttrs[attrNodes[attr].name] = attrNodes[attr].value;\n      }\n    }\n    return fieldAttrs;\n  };\n\n  /**\n   * Extend Element prototype to allow us to append fields\n   *\n   * @param  {object} fields Node elements\n   */\n  Element.prototype.appendFormFields = function (fields) {\n    var element = this;\n    fields.reverse();\n    for (var i = fields.length - 1; i >= 0; i--) {\n      element.appendChild(fields[i]);\n    }\n  };\n\n  /**\n   * Extend Element prototype to remove content\n   */\n  Element.prototype.emptyContainer = function () {\n    var element = this;\n    while (element.lastChild) {\n      element.removeChild(element.lastChild);\n    }\n  };\n\n  var otherOptionCB = function otherOptionCB() {\n    var otherOptions = document.getElementsByClassName('other-option');\n\n    var _loop = function _loop() {\n      var otherInput = document.getElementById(otherOptions[i].id + '-value');\n      otherOptions[i].onclick = function (evt) {\n        var option = this;\n        if (this.checked) {\n          otherInput.style.display = 'inline-block';\n          option.nextElementSibling.style.display = 'none';\n          otherInput.oninput = function (evt) {\n            option.value = this.value;\n          };\n        } else {\n          otherInput.style.display = 'none';\n          option.nextElementSibling.style.display = 'inline-block';\n          otherInput.oninput = undefined;\n        }\n      };\n    };\n\n    for (var i = 0; i < otherOptions.length; i++) {\n      _loop();\n    }\n  };\n\n  var runCallbacks = function runCallbacks(fields) {\n    otherOptionCB();\n  };\n\n  // Begin the core plugin\n  var rendered = [];\n\n  var formData = $.parseXML(opts.formData),\n      fields = $('field', formData);\n  // @todo - form configuration settings (control position, creatorId, theme etc)\n  // settings = $('settings', formData);\n\n  // generate field markup if we have fields\n  if (fields.length) {\n    fields.each(function (index, field) {\n      index = index;\n      rendered.push(_helpers.fieldRender(field));\n    });\n  } else {\n    var noData = _helpers.markup('div', opts.label.noFormData, {\n      className: 'no-form-data'\n    });\n    rendered.push(noData);\n    opts.notify.error(opts.label.noFormData);\n  }\n\n  if (opts.render) {\n    if (opts.container) {\n      opts.container = opts.container instanceof jQuery ? opts.container[0] : opts.container;\n      opts.container.emptyContainer();\n      opts.container.appendFormFields(rendered);\n    } else if (element) {\n      var renderedFormWrap = document.querySelector('.rendered-form');\n      if (renderedFormWrap) {\n        renderedFormWrap.emptyContainer();\n        renderedFormWrap.appendFormFields(rendered);\n      } else {\n        renderedFormWrap = _helpers.markup('div', rendered, { className: 'rendered-form' });\n        element.parentNode.insertBefore(renderedFormWrap, element.nextSibling);\n        element.style.display = 'none';\n        element.setAttribute('disabled', 'disabled');\n      }\n    }\n    if (fields.length) {\n      runCallbacks(fields);\n      opts.notify.success(opts.label.formRendered);\n    }\n  } else {\n    formRender.markup = rendered.map(function (elem) {\n      return elem.innerHTML;\n    }).join('');\n  }\n\n  return formRender;\n}\n\n(function ($) {\n\n  $.fn.formRender = function (options) {\n    this.each(function () {\n      var formRender = new FormRenderFn(options, this);\n      return formRender;\n    });\n  };\n})(jQuery);","'use strict';\n// render the formBuilder XML into html\nfunction FormRenderFn(options, element) {\n\n  var formRender = this,\n    defaults = {\n      destroyTemplate: true, // @todo\n      container: false,\n      dataType: 'xml',\n      formData: false,\n      label: {\n        formRendered: 'Form Rendered',\n        noFormData: 'No form data.',\n        other: 'Other',\n        selectColor: 'Select Color'\n      },\n      render: true,\n      notify: {\n        error: function(message) {\n          return console.error(message);\n        },\n        success: function(message) {\n          return console.log(message);\n        },\n        warning: function(message) {\n          return console.warn(message);\n        }\n      }\n    },\n    _helpers = {};\n\n  var opts = $.extend(true, defaults, options);\n\n\n  /**\n   * Require the html element if it has been lost\n   *\n   * @return {object} javascript object for html element\n   */\n  _helpers.getElement = function() {\n    if (!element.id) {\n      element.id = _helpers.makeId(element);\n    }\n\n    return document.getElementById(element.id);\n  };\n\n  /**\n   * Make an ID for this element using current date and tag\n   *\n   * @param  {Boolean} element\n   * @return {String}  new id for element\n   */\n  _helpers.makeId = function(element) {\n    let epoch = new Date().getTime();\n\n    return `${element.tagName}-${epoch}`;\n  };\n\n  if (!opts.formData && element) {\n    element = _helpers.getElement();\n    opts.formData = element.value;\n  }\n\n  /**\n   * Generate markup wrapper where needed\n   *\n   * @param  {string}              tag\n   * @param  {String|Array|Object} content we wrap this\n   * @param  {object}              attrs\n   * @return {String}\n   */\n  _helpers.markup = function(tag, content = '', attrs = {}) {\n    let contentType,\n      field = document.createElement(tag),\n      getContentType = function(content) {\n        return Array.isArray(content) ? 'array' : typeof content;\n      },\n      appendContent = {\n        string: function(content) {\n          field.innerHTML = content;\n        },\n        object: function(content) {\n          return field.appendChild(content);\n        },\n        array: function(content) {\n          for (var i = 0; i < content.length; i++) {\n            contentType = getContentType(content[i]);\n            appendContent[contentType](content[i]);\n          }\n        }\n      };\n\n    for (var attr in attrs) {\n      if (attrs.hasOwnProperty(attr)) {\n        let name = _helpers.safeAttrName(attr);\n        field.setAttribute(name, attrs[attr]);\n      }\n    }\n\n    contentType = getContentType(content);\n\n    if (content) {\n      appendContent[contentType].call(this, content);\n    }\n\n    return field;\n  };\n\n  /**\n   * Generate preview markup\n   * @param  {object} field\n   * @return {string}       preview markup for field\n   * @todo\n   */\n  _helpers.fieldRender = function(field) {\n    var fieldMarkup = '',\n      fieldLabel = '',\n      optionsMarkup = '';\n    var fieldAttrs = _helpers.parseAttrs(field.attributes),\n      fieldLabelText = fieldAttrs.label || '',\n      fieldDesc = fieldAttrs.description || '',\n      fieldRequired = '',\n      fieldOptions = $('option', field);\n    fieldAttrs.id = fieldAttrs.name;\n\n    fieldAttrs.type = fieldAttrs.subtype || fieldAttrs.type;\n\n    if (fieldAttrs.required) {\n      fieldAttrs.required = null;\n      fieldAttrs['aria-required'] = 'true';\n      fieldRequired = `<span class=\"required\">*</span>`;\n    }\n\n    if (fieldAttrs.type !== 'hidden') {\n      if (fieldDesc) {\n        fieldDesc = `<span class=\"tooltip-element\" tooltip=\"${fieldDesc}\">?</span>`;\n      }\n      fieldLabel = `<label for=\"${fieldAttrs.id}\">${fieldLabelText} ${fieldRequired} ${fieldDesc}</label>`;\n    }\n\n    var fieldLabelVal = fieldAttrs.label;\n\n    delete fieldAttrs.label;\n    delete fieldAttrs.description;\n\n    var fieldAttrsString = _helpers.attrString(fieldAttrs);\n\n    switch (fieldAttrs.type) {\n      case 'textarea':\n      case 'rich-text':\n        delete fieldAttrs.type;\n        delete fieldAttrs.value;\n        fieldMarkup = `${fieldLabel}<textarea ${fieldAttrsString}></textarea>`;\n        break;\n      case 'select':\n        fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n        if (fieldOptions.length) {\n          fieldOptions.each(function(index, el) {\n            index = index;\n            let optionAttrs = _helpers.parseAttrs(el.attributes),\n              optionAttrsString = _helpers.attrString(optionAttrs);\n            optionsMarkup += `<option ${optionAttrsString}>${el.textContent}</option>`;\n          });\n        }\n        fieldMarkup = `${fieldLabel}<select ${fieldAttrsString}>${optionsMarkup}</select>`;\n        break;\n      case 'checkbox-group':\n      case 'radio-group':\n        let enableOther = false;\n        fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n\n        if (fieldAttrs['enable-other']) {\n          delete fieldAttrs['enable-other'];\n          enableOther = true;\n        }\n\n        if (fieldOptions.length) {\n          let optionName = fieldAttrs.type === 'checkbox' ? fieldAttrs.name + '[]' : fieldAttrs.name,\n            optionAttrsString;\n          fieldOptions.each(function(index, el) {\n            let optionAttrs = $.extend({}, fieldAttrs, _helpers.parseAttrs(el.attributes));\n\n            if (optionAttrs.selected) {\n              delete optionAttrs.selected;\n              optionAttrs.checked = null;\n            }\n\n            optionAttrs.name = optionName;\n            optionAttrs.id = fieldAttrs.id + '-' + index;\n            optionAttrsString = _helpers.attrString(optionAttrs);\n            optionsMarkup += `<input ${optionAttrsString} /> <label for=\"${optionAttrs.id}\">${el.textContent}</label><br>`;\n          });\n\n          if (enableOther) {\n            let optionAttrs = {\n              id: fieldAttrs.id + '-' + 'other',\n              name: optionName,\n              class: fieldAttrs.class + ' other-option'\n            };\n\n            optionAttrsString = _helpers.attrString($.extend({}, fieldAttrs, optionAttrs));\n            optionsMarkup += `<input ${optionAttrsString} /> <label for=\"${optionAttrs.id}\">${opts.label.other}</label> <input type=\"text\" data-other-id=\"${optionAttrs.id}\" id=\"${optionAttrs.id}-value\" style=\"display:none;\" />`;\n          }\n\n        }\n        fieldMarkup = `${fieldLabel}<div class=\"${fieldAttrs.type}-group\">${optionsMarkup}</div>`;\n        break;\n      case 'text':\n      case 'password':\n      case 'email':\n      case 'file':\n      case 'hidden':\n      case 'date':\n      case 'autocomplete':\n        fieldMarkup = `${fieldLabel} <input ${fieldAttrsString}>`;\n        break;\n      case 'color':\n        fieldMarkup = `${fieldLabel} <input ${fieldAttrsString}> ${opts.label.selectColor}`;\n        break;\n      case 'button':\n      case 'submit':\n        fieldMarkup = `<button ${fieldAttrsString}>${fieldLabelVal}</button>`;\n        break;\n      case 'checkbox':\n        fieldMarkup = `<input ${fieldAttrsString}> ${fieldLabel}`;\n\n        if (fieldAttrs.toggle) {\n          setTimeout(function() {\n            $(document.getElementById(fieldAttrs.id)).kcToggle();\n          }, 100);\n        }\n        break;\n      default:\n        fieldMarkup = `<${fieldAttrs.type} ${fieldAttrsString}>${fieldLabelVal}</${fieldAttrs.type}>`;\n    }\n\n    if (fieldAttrs.type !== 'hidden') {\n      let className = fieldAttrs.id ? 'form-group field-' + fieldAttrs.id : '';\n      fieldMarkup = _helpers.markup('div', fieldMarkup, {\n        className: className\n      });\n    } else {\n      fieldMarkup = _helpers.markup('input', null, fieldAttrs);\n    }\n\n    return fieldMarkup;\n  };\n\n  /**\n   * Convert camelCase into lowercase-hyphen\n   *\n   * @param  {string} str\n   * @return {string}\n   */\n  _helpers.hyphenCase = (str) => {\n    str = str.replace(/[^\\w\\s\\-]/gi, '');\n    str = str.replace(/([A-Z])/g, function($1) {\n      return '-' + $1.toLowerCase();\n    });\n\n    return str.replace(/\\s/g, '-').replace(/^-+/g, '');\n  };\n\n  _helpers.attrString = function(attrs) {\n    let attributes = [];\n\n    for (var attr in attrs) {\n      if (attrs.hasOwnProperty(attr)) {\n        attr = _helpers.safeAttr(attr, attrs[attr]);\n        attributes.push(attr.name + attr.value);\n      }\n    }\n    return attributes.join(' ');\n  };\n\n  _helpers.safeAttr = function(name, value) {\n    let safeAttr = {\n      className: 'class'\n    };\n\n    name = safeAttr[name] || name;\n    value = value ? window.JSON.stringify(value) : false;\n    value = value ? `=${value}` : '';\n\n    return {\n      name,\n      value\n    };\n  };\n\n  _helpers.safeAttrName = function(name) {\n    let safeAttr = {\n      className: 'class'\n    };\n\n    return safeAttr[name] || _helpers.hyphenCase(name);\n  };\n\n  _helpers.parseAttrs = function(attrNodes) {\n    var fieldAttrs = {};\n    for (var attr in attrNodes) {\n      if (attrNodes.hasOwnProperty(attr)) {\n        fieldAttrs[attrNodes[attr].name] = attrNodes[attr].value;\n      }\n    }\n    return fieldAttrs;\n  };\n\n  /**\n   * Extend Element prototype to allow us to append fields\n   *\n   * @param  {object} fields Node elements\n   */\n  Element.prototype.appendFormFields = function(fields) {\n    var element = this;\n    fields.reverse();\n    for (var i = fields.length - 1; i >= 0; i--) {\n      element.appendChild(fields[i]);\n    }\n  };\n\n  /**\n   * Extend Element prototype to remove content\n   */\n  Element.prototype.emptyContainer = function() {\n    var element = this;\n    while (element.lastChild) {\n      element.removeChild(element.lastChild);\n    }\n  };\n\n  var otherOptionCB = function() {\n    var otherOptions = document.getElementsByClassName('other-option');\n    for (var i = 0; i < otherOptions.length; i++) {\n      let otherInput = document.getElementById(otherOptions[i].id + '-value');\n      otherOptions[i].onclick = function(evt) {\n        let option = this;\n        if (this.checked) {\n          otherInput.style.display = 'inline-block';\n          option.nextElementSibling.style.display = 'none';\n          otherInput.oninput = function(evt) { option.value = this.value };\n        } else {\n          otherInput.style.display = 'none';\n          option.nextElementSibling.style.display = 'inline-block';\n          otherInput.oninput = undefined;\n        }\n      };\n    }\n  };\n\n  var runCallbacks = function(fields) {\n    otherOptionCB();\n  };\n\n  // Begin the core plugin\n  var rendered = [];\n\n  var formData = $.parseXML(opts.formData),\n    fields = $('field', formData);\n  // @todo - form configuration settings (control position, creatorId, theme etc)\n  // settings = $('settings', formData);\n\n  // generate field markup if we have fields\n  if (fields.length) {\n    fields.each(function(index, field) {\n      index = index;\n      rendered.push(_helpers.fieldRender(field));\n    });\n  } else {\n    let noData = _helpers.markup('div', opts.label.noFormData, {\n      className: 'no-form-data'\n    });\n    rendered.push(noData);\n    opts.notify.error(opts.label.noFormData);\n  }\n\n  if (opts.render) {\n    if (opts.container) {\n      opts.container = (opts.container instanceof jQuery) ? opts.container[0] : opts.container;\n      opts.container.emptyContainer();\n      opts.container.appendFormFields(rendered);\n    } else if (element) {\n      let renderedFormWrap = document.querySelector('.rendered-form');\n      if (renderedFormWrap) {\n        renderedFormWrap.emptyContainer();\n        renderedFormWrap.appendFormFields(rendered);\n      } else {\n        renderedFormWrap = _helpers.markup('div', rendered, { className: 'rendered-form' });\n        element.parentNode.insertBefore(renderedFormWrap, element.nextSibling);\n        element.style.display = 'none';\n        element.setAttribute('disabled', 'disabled');\n      }\n    }\n    if (fields.length) {\n      runCallbacks(fields);\n      opts.notify.success(opts.label.formRendered);\n    }\n  } else {\n    formRender.markup = rendered.map(function(elem) {\n      return elem.innerHTML;\n    }).join('');\n  }\n\n  return formRender;\n}\n\n(function($) {\n\n  $.fn.formRender = function(options) {\n    this.each(function() {\n      let formRender = new FormRenderFn(options, this);\n      return formRender;\n    });\n  };\n\n})(jQuery);\n","(function($) {\n  'use strict';\n\n  var Toggle = function(element, options) {\n\n    var defaults = {\n      theme: 'fresh',\n      labels: {\n        off: 'Off',\n        on: 'On'\n      }\n    };\n\n    var opts = $.extend(defaults, options),\n      $kcToggle = $('<div class=\"kc-toggle\"/>').insertAfter(element).append(element);\n\n    $kcToggle.toggleClass('on', element.is(':checked'));\n\n    var kctOn = `<div class=\"kct-on\">${opts.labels.on}</div>`,\n        kctOff = `<div class=\"kct-off\">${opts.labels.off}</div>`,\n        kctHandle = `<div class=\"kct-handle\"></div>`,\n        kctInner = `<div class=\"kct-inner\">${kctOn}${kctHandle}${kctOff}</div>`;\n\n    $kcToggle.append(kctInner);\n\n    $kcToggle.click(function() {\n      element.attr('checked', !element.attr('checked'));\n      $(this).toggleClass('on');\n    });\n\n  };\n\n  $.fn.kcToggle = function(options) {\n    var toggle = this;\n    return toggle.each(function() {\n      var element = $(this);\n      if (element.data('kcToggle')) {\n        return;\n      }\n      var kcToggle = new Toggle(element, options);\n      element.data('kcToggle', kcToggle);\n    });\n  };\n\n})(jQuery);\n"],"sourceRoot":"/source/"}