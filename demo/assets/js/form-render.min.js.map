{"version":3,"sources":["form-render.min.js","kc-toggle.js","form-render.js"],"names":["$","Toggle","element","options","defaults","theme","labels","off","on","opts","extend","$kcToggle","insertAfter","append","toggleClass","is","kctOn","kctOff","kctHandle","kctInner","click","attr","this","fn","kcToggle","toggle","each","data","jQuery","formRender","$template","destroyTemplate","container","label","selectColor","noFormData","formRendered","render","notify","error","message","console","success","log","warning","warn","_helpers","markup","type","attrs","arguments","length","undefined","content","attrString","Array","isArray","join","inlineElems","template","indexOf","fieldRender","field","fieldMarkup","fieldLabel","optionsMarkup","fieldAttrs","parseAttrs","attributes","fieldDesc","description","fieldRequired","fieldOptions","id","name","className","required","fieldAttrsString","value","replace","index","el","optionAttrs","optionAttrsString","optionText","innerHTML","innerContent","innerText","childNodes","nodeValue","optionName","selected","checked","setTimeout","document","getElementById","hasOwnProperty","safeAttr","push","window","JSON","stringify","attrNodes","nodeName","rendered","formData","parseXML","val","fields","output","html","replaceWith"],"mappings":"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","file":"form-render.min.js","sourcesContent":["'use strict';\n\n(function ($) {\n  'use strict';\n\n  var Toggle = function Toggle(element, options) {\n\n    var defaults = {\n      theme: 'fresh',\n      labels: {\n        off: 'Off',\n        on: 'On'\n      }\n    };\n\n    var opts = $.extend(defaults, options),\n        $kcToggle = $('<div class=\"kc-toggle\"/>').insertAfter(element).append(element);\n\n    $kcToggle.toggleClass('on', element.is(':checked'));\n\n    var kctOn = '<div class=\"kct-on\">' + opts.labels.on + '</div>',\n        kctOff = '<div class=\"kct-off\">' + opts.labels.off + '</div>',\n        kctHandle = '<div class=\"kct-handle\"></div>',\n        kctInner = '<div class=\"kct-inner\">' + kctOn + kctHandle + kctOff + '</div>';\n\n    $kcToggle.append(kctInner);\n\n    $kcToggle.click(function () {\n      element.attr('checked', !element.attr('checked'));\n      $(this).toggleClass('on');\n    });\n  };\n\n  $.fn.kcToggle = function (options) {\n    var toggle = this;\n    return toggle.each(function () {\n      var element = $(this);\n      if (element.data('kcToggle')) {\n        return;\n      }\n      var kcToggle = new Toggle(element, options);\n      element.data('kcToggle', kcToggle);\n    });\n  };\n})(jQuery);\n// render the formBuilder XML into html\n'use strict';\n\n(function ($) {\n  'use strict';\n  $.fn.formRender = function (options) {\n    var $template = $(this),\n        defaults = {\n      destroyTemplate: true, // @todo\n      container: false,\n      label: {\n        selectColor: 'Select Color',\n        noFormData: 'No form data.',\n        formRendered: 'Form Rendered'\n      },\n      render: true,\n      notify: {\n        error: function error(message) {\n          return console.error(message);\n        },\n        success: function success(message) {\n          return console.log(message);\n        },\n        warning: function warning(message) {\n          return console.warn(message);\n        }\n      }\n    },\n        _helpers = {};\n\n    var opts = $.extend(defaults, options);\n\n    /**\n     * Generate markup wrapper where needed\n     * @param  {string} type\n     * @param  {object} attrs\n     * @param  {string} content we wrap this\n     * @return {string}\n     */\n    _helpers.markup = function (type) {\n      var attrs = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var content = arguments.length <= 2 || arguments[2] === undefined ? '' : arguments[2];\n\n      attrs = _helpers.attrString(attrs);\n      content = Array.isArray(content) ? content.join('') : content;\n      var inlineElems = ['input'],\n          template = inlineElems.indexOf(type) === -1 ? '<' + type + ' ' + attrs + '>' + content + '</' + type + '>' : '<' + type + ' ' + attrs + '/>';\n      return template;\n    };\n\n    /**\n     * Generate preview markup\n     * @param  {object} field\n     * @return {string}       preview markup for field\n     * @todo\n     */\n    _helpers.fieldRender = function (field) {\n      var fieldMarkup = '',\n          fieldLabel = '',\n          optionsMarkup = '';\n      var fieldAttrs = _helpers.parseAttrs(field.attributes),\n          fieldDesc = fieldAttrs.description || '',\n          fieldRequired = '',\n          fieldOptions = $('option', field);\n      fieldAttrs.id = fieldAttrs.name;\n      if (fieldAttrs.type !== 'checkbox') {\n        fieldAttrs.className = 'form-control';\n      }\n\n      if (fieldAttrs.required) {\n        fieldAttrs.required = null;\n        fieldAttrs['aria-required'] = 'true';\n        fieldRequired = '<span class=\"required\">*</span>';\n      }\n\n      if (fieldAttrs.type !== 'hidden') {\n        if (fieldDesc) {\n          fieldDesc = '<span class=\"tooltip-element\" tooltip=\"' + fieldDesc + '\">?</span>';\n        }\n        fieldLabel = '<label for=\"' + fieldAttrs.id + '\">' + fieldAttrs.label + ' ' + fieldRequired + ' ' + fieldDesc + '</label>';\n      }\n\n      delete fieldAttrs.label;\n      delete fieldAttrs.description;\n\n      var fieldAttrsString = _helpers.attrString(fieldAttrs);\n\n      switch (fieldAttrs.type) {\n        case 'textarea':\n        case 'rich-text':\n          delete fieldAttrs.type;\n          delete fieldAttrs.value;\n          fieldMarkup = fieldLabel + '<textarea ' + fieldAttrsString + '></textarea>';\n          break;\n        case 'select':\n          fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n          if (fieldOptions.length) {\n            fieldOptions.each(function (index, el) {\n              index = index;\n              var optionAttrs = _helpers.parseAttrs(el.attributes),\n                  optionAttrsString = _helpers.attrString(optionAttrs),\n                  optionText = el.innerHTML || el.innerContent || el.innerText || el.childNodes[0].nodeValue || el.value;\n              optionsMarkup += '<option ' + optionAttrsString + '>' + optionText + '</option>';\n            });\n          }\n          fieldMarkup = fieldLabel + '<select ' + fieldAttrsString + '>' + optionsMarkup + '</select>';\n          break;\n        case 'checkbox-group':\n        case 'radio-group':\n          fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n          delete fieldAttrs.className;\n\n          if (fieldOptions.length) {\n            (function () {\n              var optionName = fieldAttrs.type === 'checkbox' ? fieldAttrs.name + '[]' : fieldAttrs.name;\n              fieldOptions.each(function (index, el) {\n                var optionAttrs = $.extend({}, fieldAttrs, _helpers.parseAttrs(el.attributes)),\n                    optionAttrsString = undefined,\n                    optionText = undefined;\n\n                if (optionAttrs.selected) {\n                  delete optionAttrs.selected;\n                  optionAttrs.checked = null;\n                }\n\n                optionAttrs.name = optionName;\n                optionAttrs.id = fieldAttrs.id + '-' + index;\n                optionAttrsString = _helpers.attrString(optionAttrs);\n                optionText = el.innerHTML || el.innerContent || el.innerText || el.value || '';\n\n                optionsMarkup += '<input ' + optionAttrsString + ' /> <label for=\"' + optionAttrs.id + '\">' + optionText + '</label><br>';\n              });\n            })();\n          }\n          fieldMarkup = fieldLabel + '<div class=\"' + fieldAttrs.type + '-group\">' + optionsMarkup + '</div>';\n          break;\n        case 'text':\n        case 'password':\n        case 'email':\n        case 'hidden':\n        case 'date':\n        case 'autocomplete':\n          fieldMarkup = fieldLabel + ' <input ' + fieldAttrsString + '>';\n          break;\n        case 'color':\n          fieldMarkup = fieldLabel + ' <input ' + fieldAttrsString + '> ' + opts.label.selectColor;\n          break;\n        case 'checkbox':\n          fieldMarkup = '<input ' + fieldAttrsString + '> ' + fieldLabel;\n\n          if (fieldAttrs.toggle) {\n            setTimeout(function () {\n              $(document.getElementById(fieldAttrs.id)).kcToggle();\n            }, 100);\n          }\n          break;\n        default:\n          fieldMarkup = '<' + fieldAttrs.type + '></' + fieldAttrs.type + '>';\n      }\n\n      if (fieldAttrs.type !== 'hidden') {\n        fieldMarkup = _helpers.markup('div', {\n          className: 'form-group field-' + fieldAttrs.id\n        }, fieldMarkup);\n      }\n\n      return fieldMarkup;\n    };\n\n    _helpers.attrString = function (attrs) {\n      var attributes = [];\n\n      for (var attr in attrs) {\n        if (attrs.hasOwnProperty(attr)) {\n          attr = _helpers.safeAttr(attr, attrs[attr]);\n          attributes.push(attr.name + attr.value);\n        }\n      }\n      return attributes.join(' ');\n    };\n\n    _helpers.safeAttr = function (name, value) {\n      var safeAttr = {\n        className: 'class'\n      };\n\n      name = safeAttr[name] || name;\n      value = value ? window.JSON.stringify(value) : false;\n      value = value ? '=' + value : '';\n\n      return {\n        name: name,\n        value: value\n      };\n    };\n\n    _helpers.parseAttrs = function (attrNodes) {\n      var fieldAttrs = {};\n      for (var attr in attrNodes) {\n        if (attrNodes.hasOwnProperty(attr)) {\n          fieldAttrs[attrNodes[attr].nodeName] = attrNodes[attr].nodeValue;\n        }\n      }\n      return fieldAttrs;\n    };\n\n    // Begin the core plugin\n    this.each(function () {\n      var rendered = [];\n\n      var formData = $.parseXML($template.val()),\n          fields = $('field', formData);\n      // @todo - form configuration settings (control position, creatorId, theme etc)\n      // settings = $('settings', formData);\n\n      if (!formData) {\n        opts.notify.error(opts.label.noFormData);\n        return false;\n      } else {\n        opts.notify.success(opts.label.formRendered);\n      }\n\n      // generate field markup if we have fields\n      if (fields.length) {\n        fields.each(function (index, field) {\n          index = index;\n          rendered.push(_helpers.fieldRender(field));\n        });\n      }\n\n      // sets the markup as data to be used by other modules\n      $template.data('formHtml', rendered);\n\n      var output = rendered.join('');\n\n      if (opts.render) {\n        if (opts.container && opts.container.length) {\n          opts.container.html(output);\n        } else {\n          $template.replaceWith(output);\n        }\n      }\n    });\n  };\n})(jQuery);","(function($) {\n  'use strict';\n\n  var Toggle = function(element, options) {\n\n    var defaults = {\n      theme: 'fresh',\n      labels: {\n        off: 'Off',\n        on: 'On'\n      }\n    };\n\n    var opts = $.extend(defaults, options),\n      $kcToggle = $('<div class=\"kc-toggle\"/>').insertAfter(element).append(element);\n\n    $kcToggle.toggleClass('on', element.is(':checked'));\n\n    var kctOn = `<div class=\"kct-on\">${opts.labels.on}</div>`,\n        kctOff = `<div class=\"kct-off\">${opts.labels.off}</div>`,\n        kctHandle = `<div class=\"kct-handle\"></div>`,\n        kctInner = `<div class=\"kct-inner\">${kctOn}${kctHandle}${kctOff}</div>`;\n\n    $kcToggle.append(kctInner);\n\n    $kcToggle.click(function() {\n      element.attr('checked', !element.attr('checked'));\n      $(this).toggleClass('on');\n    });\n\n  };\n\n  $.fn.kcToggle = function(options) {\n    var toggle = this;\n    return toggle.each(function() {\n      var element = $(this);\n      if (element.data('kcToggle')) {\n        return;\n      }\n      var kcToggle = new Toggle(element, options);\n      element.data('kcToggle', kcToggle);\n    });\n  };\n\n})(jQuery);\n","// render the formBuilder XML into html\n(function($) {\n  'use strict';\n  $.fn.formRender = function(options) {\n    var $template = $(this),\n      defaults = {\n        destroyTemplate: true, // @todo\n        container: false,\n        label: {\n          selectColor: 'Select Color',\n          noFormData: 'No form data.',\n          formRendered: 'Form Rendered'\n        },\n        render: true,\n        notify: {\n          error: function(message) {\n            return console.error(message);\n          },\n          success: function(message) {\n            return console.log(message);\n          },\n          warning: function(message) {\n            return console.warn(message);\n          }\n        }\n      },\n      _helpers = {};\n\n    var opts = $.extend(defaults, options);\n\n    /**\n     * Generate markup wrapper where needed\n     * @param  {string} type\n     * @param  {object} attrs\n     * @param  {string} content we wrap this\n     * @return {string}\n     */\n    _helpers.markup = function(type, attrs = {}, content = '') {\n      attrs = _helpers.attrString(attrs);\n      content = Array.isArray(content) ? content.join('') : content;\n      let inlineElems = ['input'],\n        template = inlineElems.indexOf(type) === -1 ? `<${type} ${attrs}>${content}</${type}>` : `<${type} ${attrs}/>`;\n      return template;\n    };\n\n    /**\n     * Generate preview markup\n     * @param  {object} field\n     * @return {string}       preview markup for field\n     * @todo\n     */\n    _helpers.fieldRender = function(field) {\n      var fieldMarkup = '',\n        fieldLabel = '',\n        optionsMarkup = '';\n      var fieldAttrs = _helpers.parseAttrs(field.attributes),\n        fieldDesc = fieldAttrs.description || '',\n        fieldRequired = '',\n        fieldOptions = $('option', field);\n      fieldAttrs.id = fieldAttrs.name;\n      if (fieldAttrs.type !== 'checkbox') {\n        fieldAttrs.className = 'form-control';\n      }\n\n      if (fieldAttrs.required) {\n        fieldAttrs.required = null;\n        fieldAttrs['aria-required'] = 'true';\n        fieldRequired = `<span class=\"required\">*</span>`;\n      }\n\n      if (fieldAttrs.type !== 'hidden') {\n        if (fieldDesc) {\n          fieldDesc = `<span class=\"tooltip-element\" tooltip=\"${fieldDesc}\">?</span>`;\n        }\n        fieldLabel = `<label for=\"${fieldAttrs.id}\">${fieldAttrs.label} ${fieldRequired} ${fieldDesc}</label>`;\n      }\n\n      delete fieldAttrs.label;\n      delete fieldAttrs.description;\n\n      var fieldAttrsString = _helpers.attrString(fieldAttrs);\n\n      switch (fieldAttrs.type) {\n        case 'textarea':\n        case 'rich-text':\n          delete fieldAttrs.type;\n          delete fieldAttrs.value;\n          fieldMarkup = `${fieldLabel}<textarea ${fieldAttrsString}></textarea>`;\n          break;\n        case 'select':\n          fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n          if (fieldOptions.length) {\n            fieldOptions.each(function(index, el) {\n              index = index;\n              let optionAttrs = _helpers.parseAttrs(el.attributes),\n                optionAttrsString = _helpers.attrString(optionAttrs),\n                optionText = el.innerHTML || el.innerContent || el.innerText || el.childNodes[0].nodeValue || el.value;\n              optionsMarkup += `<option ${optionAttrsString}>${optionText}</option>`;\n            });\n          }\n          fieldMarkup = `${fieldLabel}<select ${fieldAttrsString}>${optionsMarkup}</select>`;\n          break;\n        case 'checkbox-group':\n        case 'radio-group':\n          fieldAttrs.type = fieldAttrs.type.replace('-group', '');\n\n          delete fieldAttrs.className;\n\n          if (fieldOptions.length) {\n            let optionName = fieldAttrs.type === 'checkbox' ? fieldAttrs.name + '[]' : fieldAttrs.name;\n            fieldOptions.each(function(index, el) {\n              let optionAttrs = $.extend({}, fieldAttrs, _helpers.parseAttrs(el.attributes)),\n                optionAttrsString,\n                optionText;\n\n              if (optionAttrs.selected) {\n                delete optionAttrs.selected;\n                optionAttrs.checked = null;\n              }\n\n              optionAttrs.name = optionName;\n              optionAttrs.id = fieldAttrs.id + '-' + index;\n              optionAttrsString = _helpers.attrString(optionAttrs);\n              optionText = el.innerHTML || el.innerContent || el.innerText || el.value || '';\n\n              optionsMarkup += `<input ${optionAttrsString} /> <label for=\"${optionAttrs.id}\">${optionText}</label><br>`;\n            });\n          }\n          fieldMarkup = `${fieldLabel}<div class=\"${fieldAttrs.type}-group\">${optionsMarkup}</div>`;\n          break;\n        case 'text':\n        case 'password':\n        case 'email':\n        case 'hidden':\n        case 'date':\n        case 'autocomplete':\n          fieldMarkup = `${fieldLabel} <input ${fieldAttrsString}>`;\n          break;\n        case 'color':\n          fieldMarkup = `${fieldLabel} <input ${fieldAttrsString}> ${opts.label.selectColor}`;\n          break;\n        case 'checkbox':\n          fieldMarkup = `<input ${fieldAttrsString}> ${fieldLabel}`;\n\n          if (fieldAttrs.toggle) {\n            setTimeout(function() {\n              $(document.getElementById(fieldAttrs.id)).kcToggle();\n            }, 100);\n          }\n          break;\n        default:\n          fieldMarkup = `<${fieldAttrs.type}></${fieldAttrs.type}>`;\n      }\n\n      if (fieldAttrs.type !== 'hidden') {\n        fieldMarkup = _helpers.markup('div', {\n          className: 'form-group field-' + fieldAttrs.id\n        }, fieldMarkup);\n      }\n\n      return fieldMarkup;\n    };\n\n    _helpers.attrString = function(attrs) {\n      let attributes = [];\n\n      for (var attr in attrs) {\n        if (attrs.hasOwnProperty(attr)) {\n          attr = _helpers.safeAttr(attr, attrs[attr]);\n          attributes.push(attr.name + attr.value);\n        }\n      }\n      return attributes.join(' ');\n    };\n\n    _helpers.safeAttr = function(name, value) {\n      let safeAttr = {\n        className: 'class'\n      };\n\n      name = safeAttr[name] || name;\n      value = value ? window.JSON.stringify(value) : false;\n      value = value ? `=${value}` : '';\n\n      return {\n        name,\n        value\n      };\n    };\n\n    _helpers.parseAttrs = function(attrNodes) {\n      var fieldAttrs = {};\n      for (var attr in attrNodes) {\n        if (attrNodes.hasOwnProperty(attr)) {\n          fieldAttrs[attrNodes[attr].nodeName] = attrNodes[attr].nodeValue;\n        }\n      }\n      return fieldAttrs;\n    };\n\n    // Begin the core plugin\n    this.each(function() {\n      var rendered = [];\n\n      var formData = $.parseXML($template.val()),\n        fields = $('field', formData);\n      // @todo - form configuration settings (control position, creatorId, theme etc)\n      // settings = $('settings', formData);\n\n      if (!formData) {\n        opts.notify.error(opts.label.noFormData);\n        return false;\n      } else {\n        opts.notify.success(opts.label.formRendered);\n      }\n\n      // generate field markup if we have fields\n      if (fields.length) {\n        fields.each(function(index, field) {\n          index = index;\n          rendered.push(_helpers.fieldRender(field));\n        });\n      }\n\n      // sets the markup as data to be used by other modules\n      $template.data('formHtml', rendered);\n\n      var output = rendered.join('');\n\n      if (opts.render) {\n        if (opts.container && opts.container.length) {\n          opts.container.html(output);\n        } else {\n          $template.replaceWith(output);\n        }\n      }\n\n    });\n  };\n})(jQuery);\n"],"sourceRoot":"/source/"}