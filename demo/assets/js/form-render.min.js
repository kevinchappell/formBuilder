"use strict";function FormRenderFn(e,t){var n=fbUtils,r=this,a={destroyTemplate:!0,container:!1,dataType:"xml",formData:!1,messages:{formRendered:"Form Rendered",noFormData:"No form data.",other:"Other",selectColor:"Select Color"},onRender:function(){},render:!0,notify:{error:function(e){return console.error(e)},success:function(e){return console.log(e)},warning:function(e){return console.warn(e)}}},o=$.extend(!0,a,e);!function(){if(!o.formData)return!1;var e={xml:function(e){return n.parseXML(e)},json:function(e){return window.JSON.parse(e)}};o.formData=e[o.dataType](o.formData)||!1}(),Element.prototype.appendFormFields=function(e){var t=this;e.forEach(function(e){return t.appendChild(e)})},Element.prototype.emptyContainer=function(){for(var e=this;e.lastChild;)e.removeChild(e.lastChild)};var i=function(){o.onRender&&o.onRender()},l=function(e){var t=Object.assign({},e);return t.className=e.className||e["class"]||null,delete t["class"],e.values&&(e.values=e.values.map(function(e){return n.trimObj(e)})),n.trimObj(t)},s=[];if(o.formData){for(var c=0;c<o.formData.length;c++){var f=l(o.formData[c]);s.push(n.fieldRender(f,o))}if(o.render){if(o.container){var u=n.markup("div",s,{className:"rendered-form"});o.container=o.container instanceof jQuery?o.container[0]:o.container,o.container.emptyContainer(),o.container.appendChild(u)}else t&&(t.emptyContainer(),t.appendFormFields(s));i(),o.notify.success(o.messages.formRendered)}else r.markup=s.map(function(e){return e.innerHTML}).join("")}else{var p=n.markup("div",o.messages.noFormData,{className:"no-form-data"});s.push(p),o.notify.error(o.messages.noFormData)}return r}"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}}(),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),"function"!=typeof Object.create&&(Object.create=function(e){var t=function(){};return function(n,r){if(n!==Object(n)||null!==n)throw TypeError("Argument must be an object, or null");t.prototype=n||{};var a=new t;return t.prototype=null,r!==e&&Object.defineProperties(a,r),null===n&&(a.__proto__=null),a}}()),function(e){var t=function(t,n){var r={theme:"fresh",messages:{off:"Off",on:"On"}},a=e.extend(r,n),o=e('<div class="kc-toggle"/>').insertAfter(t).append(t);o.toggleClass("on",t.is(":checked"));var i='<div class="kct-on">'+a.messages.on+"</div>",l='<div class="kct-off">'+a.messages.off+"</div>",s='<div class="kct-handle"></div>',c='<div class="kct-inner">'+i+s+l+"</div>";o.append(c),o.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(n){var r=this;return r.each(function(){var r=e(this);if(!r.data("kcToggle")){var a=new t(r,n);r.data("kcToggle",a)}})}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fbUtils={};fbUtils.inArray=function(e,t){return t.indexOf(e)!==-1},fbUtils.trimObj=function(e){var t=[null,void 0,"",!1,"false"];for(var n in e)fbUtils.inArray(e[n],t)?delete e[n]:Array.isArray(e[n])&&(e[n].length||delete e[n]);return e},fbUtils.validAttr=function(e){var t=["values","enableOther","other","label","subtype"];return!fbUtils.inArray(e,t)},fbUtils.attrString=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&fbUtils.validAttr(n)&&(n=fbUtils.safeAttr(n,e[n]),t.push(n.name+n.value));return t.join(" ")},fbUtils.safeAttr=function(e,t){e=fbUtils.safeAttrName(e);var n=void 0;return t&&(Array.isArray(t)?n=fbUtils.escapeAttr(t.join(" ")):("boolean"==typeof t&&(t=t.toString()),n=fbUtils.escapeAttr(t.replace(","," ").trim()))),t=t?'="'+n+'"':"",{name:e,value:t}},fbUtils.safeAttrName=function(e){var t={className:"class"};return t[e]||fbUtils.hyphenCase(e)},fbUtils.hyphenCase=function(e){return e=e.replace(/[^\w\s\-]/gi,""),e=e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),e.replace(/\s/g,"-").replace(/^-+/g,"")},fbUtils.camelCase=function(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},fbUtils.markup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,a=document.createElement(e),o=function(e){return Array.isArray(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)},i={string:function(e){a.innerHTML=e},object:function(e){return a.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)r=o(e[t]),i[r](e[t])}};for(var l in n)if(n.hasOwnProperty(l)){var s=fbUtils.safeAttrName(l);a.setAttribute(s,n[l])}return r=o(t),t&&i[r].call(this,t),a},fbUtils.parseAttrs=function(e){var t=e.attributes,n={};return fbUtils.forEach(t,function(e){var r=t[e].value;r.match(/false|true/g)?r="true"===r:r.match(/undefined/g)&&(r=void 0),r&&(n[t[e].name]=r)}),n},fbUtils.parseOptions=function(e){var t=e.getElementsByTagName("option"),n={},r=[];if(t.length)for(var a=0;a<t.length;a++)n=fbUtils.parseAttrs(t[a]),n.label=t[a].textContent,r.push(n);return r},fbUtils.parseXML=function(e){var t=new window.DOMParser,n=t.parseFromString(e,"text/xml"),r=[];if(n)for(var a=n.getElementsByTagName("field"),o=0;o<a.length;o++){var i=fbUtils.parseAttrs(a[o]);a[o].children&&a[o].children.length&&(i.values=fbUtils.parseOptions(a[o])),r.push(i)}return r},fbUtils.escapeHtml=function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},fbUtils.escapeAttr=function(e){function t(e){return n[e]||e}var n={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof e?e.replace(/["&<>]/g,t):e},fbUtils.escapeAttrs=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=fbUtils.escapeAttr(e[t]));return e},fbUtils.forEach=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},fbUtils.unique=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},fbUtils.fieldRender=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="",a="",o="",i=e.label||"",l=e.description||"",s="",c=e.values;e.name=n?e.name+"-preview":e.name,e.id=e.name,e.name=e.multiple?e.name+"[]":e.name,e.type=e.subtype||e.type,e.required&&(e.required=null,e["aria-required"]="true",s='<span class="required">*</span>'),"hidden"!==e.type&&(l&&(l='<span class="tooltip-element" tooltip="'+l+'">?</span>'),a='<label for="'+e.id+'" class="fb-'+e.type+'-label">'+i+" "+s+" "+l+"</label>");var f=e.label;delete e.label,delete e.description;var u=fbUtils.attrString(e);switch(e.type){case"textarea":case"rich-text":delete e.type;var p=e.value||"";r=a+"<textarea "+u+">"+p+"</textarea>";break;case"select":var d;if(e.type=e.type.replace("-group",""),c){e.placeholder&&(o+="<option disabled selected>"+e.placeholder+"</option>");for(var m=0;m<c.length;m++)c[m].selected&&!e.placeholder||delete c[m].selected,c[m].label||(c[m].label=""),d=fbUtils.attrString(c[m]),o+="<option "+d+">"+c[m].label+"</option>"}r=a+"<select "+u+">"+o+"</select>";break;case"checkbox-group":case"radio-group":var b=void 0;if(e.type=e.type.replace("-group",""),"checkbox"===e.type&&(e.name=e.name+"[]"),c){for(var v=void 0,y=0;y<c.length;y++)b=Object.assign({value:"",label:""},e,c[y]),b.selected&&(delete b.selected,b.checked=null),b.id=e.id+"-"+y,v=fbUtils.attrString(b),o+="<input "+v+' /> <label for="'+b.id+'">'+b.label+"</label><br>";if(e.other){var h={id:e.id+"-other",className:e.className+" other-option",onclick:"fbUtils.otherOptionCB('"+e.id+"-other')"};v=fbUtils.attrString(Object.assign({},e,h)),o+="<input "+v+' /> <label for="'+h.id+'">'+t.messages.other+'</label> <input type="text" name="'+e.name+'" id="'+h.id+'-value" style="display:none;" />'}}r=a+'<div class="'+e.type+'-group">'+o+"</div>";break;case"text":case"password":case"email":case"number":case"file":case"hidden":case"date":case"tel":case"autocomplete":r=a+" <input "+u+">";break;case"color":r=a+" <input "+u+"> "+t.messages.selectColor;break;case"button":case"submit":r="<button "+u+">"+f+"</button>";break;case"checkbox":r="<input "+u+"> "+a,e.toggle&&setTimeout(function(){$(document.getElementById(e.id)).kcToggle()},100);break;default:r="<"+e.type+" "+u+">"+f+"</"+e.type+">"}if("hidden"!==e.type){var g=e.id?"fb-"+e.type+" form-group field-"+e.id:"";r=fbUtils.markup("div",r,{className:g})}else r=fbUtils.markup("input",null,e);return r},fbUtils.otherOptionCB=function(e){var t=document.getElementById(e),n=document.getElementById(e+"-value");t.checked?(t.style.display="none",n.style.display="inline-block"):(t.style.display="inline-block",n.style.display="none")},fbUtils.capitalize=function(e){return e.replace(/\b\w/g,function(e){return e.toUpperCase()})},fbUtils.extend=function(e,t){var n=function(){e.apply(this,arguments)};n.prototype=Object.create(e.prototype),n.prototype.constructor=n;for(var r in t)n.prototype[r]=t[r];return n.superclass=e.prototype,n},function(e){e.fn.formRender=function(e){this.each(function(){var t=new FormRenderFn(e,this);return t})}}(jQuery);
//# sourceMappingURL=form-render.min.js.map
